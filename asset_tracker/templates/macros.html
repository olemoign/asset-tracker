{% macro date(label, field) -%}
    <div class="col-sm-4">
        <div class="form-group">
            <label>{{ gettext(label) }}</label>
            <p>{% if asset[field] %}{{ asset[field]|format_date(locale) }}{% else %}&nbsp;{% endif %}</p>
        </div>
    </div>
{%- endmacro %}

{% macro input(label, field, type='text', required=False, placeholder=None) -%}
    <div class="col-sm-6">
        <div class="form-group">
            <label for="{{ field }}">{{ gettext(label) }}{% if required %} *{% endif %}</label>
            <input type="{{ type }}" class="form-control" id="{{ field }}" name="{{ field }}"
                {% if placeholder %} placeholder="{{ gettext(placeholder) }}"{% endif %}
                {% if asset and asset[field] %} value="{{ asset[field] }}"
                {% elif site and site[field] %} value="{{ site[field] }}"{% endif %}
                {% if required %} required{% endif %}>
        </div>
    </div>
{%- endmacro %}

{% macro equipment_box(equipment=None, reference=False) -%}
    <div {% if reference %}id="equipment__reference"{% endif %} class="col-sm-6 col-md-4 equipment__block" {% if reference %}style="display: none;"{% endif %}>
        <div class="well well-sm">

            {# select equipment #}
            <div class="form-group">
                <select class="form-control equipment__select" name="equipment-family" title="equipment-family">
                    <option></option>
                {% for family in equipments_families|sort(attribute='model_translated') %}
                    <option value="{{ family.family_id }}" {% if equipment and equipment.family_id == family.id %}selected{% endif %}>
                        {{ family.model_translated }}
                    </option>
                {% endfor %}
                </select>
            </div>

            {# serial number & remove button #}
            <div class="form-group">
                <div class="input-group">
                    <input type="text" class="form-control" name="equipment-serial_number" placeholder="S/N"
                            {% if equipment and equipment.serial_number %}
                                value="{{ equipment.serial_number }}"
                            {% endif %}>
                    <span class="input-group-btn equipment__remove">
                        <button type="button" class="btn btn-default">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </span>
                </div>
            </div>

            {# expiration date fields #}
            <div class="form-group expiration_date_fields"
                 {% if reference or (equipment and equipment.family.family_id != GLUCOMETER_ID) %}style="display: none;"{% endif %}>
                <div class="form-group" >
                    <label for="equipment-expiration_date_1">{{ gettext('Expiration date - lancets') }}</label>
                    <input type="date" class="form-control" name="equipment-expiration_date_1"
                           placeholder="{{ gettext('DD/MM/YYYY') }}"
                           {% if equipment and equipment.expiration_date_1 %}
                                value="{{ equipment.expiration_date_1 }}"
                           {% endif %}>
                </div>
                <div class="form-group" >
                    <label for="equipment-expiration_date_2">{{ gettext('Expiration date - test strips') }}</label>
                    <input type="date" class="form-control" name="equipment-expiration_date_2"
                           placeholder="{{ gettext('DD/MM/YYYY') }}"
                           {% if equipment and equipment.expiration_date_2 %}
                                value="{{ equipment.expiration_date_2 }}"
                           {% endif %}>
                </div>
            </div>

        </div>
    </div>
{%- endmacro %}
