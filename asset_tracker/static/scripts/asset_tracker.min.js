"use strict";function addHrefToDataTablesRows(e,t){var a=jQuery.grep(t.links,function(e){return"self"==e.rel});e.setAttribute("data-href",a[0].href)}$(document).ready(function(){var e=$("link[rel=icon]"),t=e.css("backgroundImage").match(/\((.*?)\)/)[1].replace(/('|")/g,"");e.attr("href",t);var a=$("input[type=text]").first();a.focus(),a.val(a.val())}),$(document).on("click",".equipment__add",function(){$(this).parent().next().clone().find("select").val("").end().find("input").val("").end().appendTo($(this).parents().eq(1))}),$(document).on("click",".equipment__remove",function(){$(".equipment__block").size()>1?$(this).parents(".equipment__block").remove():$(this).parents(".equipment__block").find('[name="asset-equipment-family"]').val("").end().find('[name="asset-equipment-serial_number"]').val("").focus()});var dataTablesTranslations={fr:{sProcessing:"Traitement en cours...",sSearch:"Rechercher&nbsp;:",sLengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",sInfo:"Affichage de l'&eacute;l&eacute;ment _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",sInfoEmpty:"Affichage de l'&eacute;l&eacute;ment 0 &agrave; 0 sur 0 &eacute;l&eacute;ments",sInfoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",sInfoPostFix:"",sLoadingRecords:"Chargement en cours...",sZeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",sEmptyTable:"Aucune donn&eacute;e disponible dans le tableau",oPaginate:{sFirst:"Premier",sPrevious:"Pr&eacute;c&eacute;dent",sNext:"Suivant",sLast:"Dernier"},oAria:{sSortAscending:": activer pour trier la colonne par ordre croissant",sSortDescending:": activer pour trier la colonne par ordre d&eacute;croissant"}}};$(document).ready(function(){var e=$("link[rel=icon]"),t=e.css("backgroundImage").match(/\((.*?)\)/)[1].replace(/('|")/g,"");e.attr("href",t);var a={serverSide:!0,stateSave:!0,pageLength:50,lengthChange:!1,rowCallback:addHrefToDataTablesRows};"en"!==userLocale&&(a.language=dataTablesTranslations[userLocale]),$("table.dataTables").DataTable(a)}),$(document).on("click","table tr",function(){this.hasAttribute("data-href")&&"null"!=this.getAttribute("data-href")&&(window.location.href=this.getAttribute("data-href"))}),$(document).on("click",".event__delete",function(){const e=$(this).data("eventid");$("form").append('<input type="hidden" name="event-removed" value="'+e+'">'),$(this).parent().hide("fast")}),$(document).on("submit","form",function(e){$('input[type="date"]').each(function(){const t=$(this).val(),a=t.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(a)return $(this).val(a[3]+"-"+a[2]+"-"+a[1]),!0;const n=t.match(/^\d{4}-\d{2}-\d{2}$/);return n?void 0:(e.preventDefault(),$(this).val(""),$(this).parent().addClass("has-error"),alert("Invalid date format."),!1)})});