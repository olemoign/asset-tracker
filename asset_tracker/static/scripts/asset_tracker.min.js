"use strict";function createDataTables(){const e=$("table.dataTables");if(!e)return;const t=[],a=e.data("custom-filter");e.find("th").each(function(){const e={},a=$(this).data("render");a&&(e.render=window[a]),t.push(e)});const n={serverSide:!0,ajax:{url:e.data("ajax-url")},stateSave:!0,pageLength:50,lengthChange:!1,responsive:{details:!1},processing:!0,columns:t,rowCallback:assetTrackerCallback};"en"!==userLocale&&(n.language=dataTablesTranslations[userLocale]),a&&(n.dom='<"row"<"col-sm-6"<"custom_filter checkbox">><"col-sm-6"f>>                                      <"row"<"col-sm-12"tr>>                                      <"row"<"col-sm-5"i><"col-sm-7"p>>');const c=e.DataTable(n);if(a){const t=$(c.table().container());c.on("stateSaveParams.dt",function(e,a,n){n.customFilter=!t.find(".custom_filter__input").is(":checked")});const a=e.data("custom-filter-label"),n=c.state.loaded(),s=!0===e.data("custom-filter-default"),i='<label><input class="custom_filter__input" type="checkbox"'+(!n&&!s||n&&!n.customFilter?" checked":"")+"> "+a+"</label>";t.find(".custom_filter").html(i).css("padding","10px 0 0 10px"),c.state.save(),t.find(".custom_filter__input").change(function(){c.draw()})}e.on("preXhr.dt",function(){c.state.save()})}function assetTrackerCallback(e,t){addHref(e,t),styleInactiveObjects(e,t)}function addHref(e,t){if(t.links){const a=$.grep(t.links,function(e){return"self"===e.rel});$(e).find("td").each(function(){$(this).html()||$(this).html("&nbsp;"),$(this).wrapInner('<a href="'+a[0].href+'"></a>')})}}function styleInactiveObjects(e,t){t.hasOwnProperty("is_active")&&!t.is_active&&$(e).addClass("warning")}$(document).ready(function(){createDataTables();const e=$("input[type=text]").first();e.focus(),e.val(e.val())}),$(document).on("click",".equipment__add",function(e){e.preventDefault();const t=$(".equipments__list");$(".equipment__block").first().clone().find("select").val("").end().find("input").val("").end().appendTo(t)}),$(document).on("click",".equipment__remove",function(){const e=$(".equipment__block").length,t=$(this).parents(".equipment__block");e>1?t.remove():t.find("select").val("").end().find("input").val("")});const dataTablesTranslations={fr:{sProcessing:"Traitement en cours...",sSearch:"Rechercher&nbsp;:",sLengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",sInfo:"Affichage de l'&eacute;l&eacute;ment _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",sInfoEmpty:"Affichage de l'&eacute;l&eacute;ment 0 &agrave; 0 sur 0 &eacute;l&eacute;ments",sInfoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",sInfoPostFix:"",sLoadingRecords:"Chargement en cours...",sZeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",sEmptyTable:"Aucune donn&eacute;e disponible dans le tableau",oPaginate:{sFirst:"Premier",sPrevious:"Pr&eacute;c&eacute;dent",sNext:"Suivant",sLast:"Dernier"},oAria:{sSortAscending:": activer pour trier la colonne par ordre croissant",sSortDescending:": activer pour trier la colonne par ordre d&eacute;croissant"}}};$(document).on("preInit.dt",function(e,t){const a=new $.fn.dataTable.Api(t).state.loaded(),n=$(e.target),c=n.data("custom-filter");c&&(t.ajax.data=function(e){const t=$(n.DataTable().table().container()).find(".custom_filter__input"),s=!0===n.data("custom-filter-default");(t.length&&!t.is(":checked")||!t.length&&a&&a.customFilter||!t.length&&!a&&s)&&(e.filter=c)})}),$(document).on("click",".paginate_button",function(){$("body").animate({scrollTop:0},"slow")}),$(document).on("click",".event__delete",function(){const e=$(this).data("eventid");$("form").append('<input type="hidden" name="event-removed" value="'+e+'">'),$(this).parent().hide("fast")}),$(document).on("submit","form",function(e){$('input[type="date"]').each(function(){const t=$(this).val();if(!t)return!0;const a=t.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);return a?($(this).val(a[3]+"-"+a[2]+"-"+a[1]),!0):t.match(/^\d{4}-\d{2}-\d{2}$/)?void 0:(e.preventDefault(),$(this).val(""),$(this).parent().addClass("has-error"),alert("Invalid date format."),!1)})});